{"version":3,"sources":["../../../../src/modules/system/dept/dept.controller.ts"],"sourcesContent":["import {\n  Body,\n  Controller,\n  Delete,\n  Get,\n  Post,\n  Put,\n  Query,\n} from '@nestjs/common';\nimport {\n  ApiBearerAuth,\n  ApiOkResponse,\n  ApiOperation,\n  ApiQuery,\n  ApiTags,\n} from '@nestjs/swagger';\n\nimport { ENTITY_BIZ_TYPE } from '@/constants';\nimport { OperLog, Permission } from '@/decorators';\nimport { DelDTO } from '@/models';\n\nimport { CreateDeptDTO, FindDeptListDTO, UpdateDeptDTO } from './dept.dto';\nimport { DeptService } from './dept.service';\nimport { FindDeptListVO, GetDeptTreeVO } from './dept.vo';\n\n@ApiTags('部门接口')\n@ApiBearerAuth()\n@Controller('/system/dept')\nexport class DeptController {\n  constructor(private deptService: DeptService) {}\n\n  @ApiOperation({ summary: '查询部门列表' })\n  @ApiOkResponse({ type: FindDeptListVO })\n  @Permission('system:dept:list')\n  @Post('/list')\n  async findList(@Body() dto: FindDeptListDTO) {\n    return await this.deptService.handleFindList(dto);\n  }\n\n  @ApiOperation({ summary: '获取部门树' })\n  @ApiOkResponse({ type: GetDeptTreeVO })\n  @Permission('system:dept:list')\n  @Get('/tree')\n  async getTree() {\n    return await this.deptService.handleGetTree();\n  }\n\n  @ApiOperation({ summary: '新增部门' })\n  @OperLog({ title: '部门管理', bizType: ENTITY_BIZ_TYPE.INSERT })\n  @Permission('system:dept:add')\n  @Post('/create')\n  async create(@Body() dto: CreateDeptDTO) {\n    await this.deptService.handleCreate(dto);\n  }\n\n  @ApiOperation({ summary: '更新部门' })\n  @ApiQuery({ name: 'id', description: '主键' })\n  @OperLog({ title: '部门管理', bizType: ENTITY_BIZ_TYPE.UPDATE })\n  @Permission('system:dept:edit')\n  @Put('/update')\n  async update(@Query('id') id: string, @Body() dto: UpdateDeptDTO) {\n    await this.deptService.handleUpdate(id, dto);\n  }\n\n  @ApiOperation({ summary: '删除部门' })\n  @OperLog({ title: '部门管理', bizType: ENTITY_BIZ_TYPE.DELETE })\n  @Permission('system:dept:remove')\n  @Delete('/delete')\n  async deleteMany(@Body() dto: DelDTO) {\n    await this.deptService.handleDeleteMany(dto);\n  }\n}\n"],"names":["DeptController","findList","dto","deptService","handleFindList","getTree","handleGetTree","create","handleCreate","update","id","handleUpdate","deleteMany","handleDeleteMany","constructor","ApiOperation","summary","ApiOkResponse","type","FindDeptListVO","Permission","Post","Body","GetDeptTreeVO","Get","OperLog","title","bizType","ENTITY_BIZ_TYPE","INSERT","ApiQuery","name","description","UPDATE","Put","Query","DELETE","Delete","ApiTags","ApiBearerAuth","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA4BaA;;;eAAAA;;;wBApBN;yBAOA;2BAEyB;4BACI;wBACb;yBAEuC;6BAClC;wBACkB;;;;;;;;;;;;;;;AAKvC,IAAA,AAAMA,iBAAN,MAAMA;IAGX,MAIMC,SAAS,AAAQC,GAAoB,EAAE;QAC3C,OAAO,MAAM,IAAI,CAACC,WAAW,CAACC,cAAc,CAACF;IAC/C;IAEA,MAIMG,UAAU;QACd,OAAO,MAAM,IAAI,CAACF,WAAW,CAACG,aAAa;IAC7C;IAEA,MAIMC,OAAO,AAAQL,GAAkB,EAAE;QACvC,MAAM,IAAI,CAACC,WAAW,CAACK,YAAY,CAACN;IACtC;IAEA,MAKMO,OAAO,AAAaC,EAAU,EAAE,AAAQR,GAAkB,EAAE;QAChE,MAAM,IAAI,CAACC,WAAW,CAACQ,YAAY,CAACD,IAAIR;IAC1C;IAEA,MAIMU,WAAW,AAAQV,GAAW,EAAE;QACpC,MAAM,IAAI,CAACC,WAAW,CAACU,gBAAgB,CAACX;IAC1C;IAzCAY,YAAY,AAAQX,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AA0CjD;;IAxCGY,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAS;IACjCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMC,sBAAc;IAAC;IACrCC,IAAAA,sBAAU,EAAC;IACXC,IAAAA,YAAI,EAAC;IACUC,aAAAA,IAAAA,YAAI;;;eAAQ,wBAAe,4BAAf,wBAAe;;;GAPhCtB;;IAWVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAQ;IAChCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMK,qBAAa;IAAC;IACpCH,IAAAA,sBAAU,EAAC;IACXI,IAAAA,WAAG,EAAC;;;;GAdMxB;;IAmBVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAO;IAC/BS,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACC,MAAM;IAAC;IACzDT,IAAAA,sBAAU,EAAC;IACXC,IAAAA,YAAI,EAAC;IACQC,aAAAA,IAAAA,YAAI;;;eAAQ,sBAAa,4BAAb,sBAAa;;;GAvB5BtB;;IA2BVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAO;IAC/Bc,IAAAA,iBAAQ,EAAC;QAAEC,MAAM;QAAMC,aAAa;IAAK;IACzCP,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACK,MAAM;IAAC;IACzDb,IAAAA,sBAAU,EAAC;IACXc,IAAAA,WAAG,EAAC;IACSC,aAAAA,IAAAA,aAAK,EAAC;IAAmBb,aAAAA,IAAAA,YAAI;;;;eAAQ,sBAAa,4BAAb,sBAAa;;;GAhCrDtB;;IAoCVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAO;IAC/BS,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACQ,MAAM;IAAC;IACzDhB,IAAAA,sBAAU,EAAC;IACXiB,IAAAA,cAAM,EAAC;IACUf,aAAAA,IAAAA,YAAI;;;eAAQ,cAAM,4BAAN,cAAM;;;GAxCzBtB;AAAAA;IAHZsC,IAAAA,gBAAO,EAAC;IACRC,IAAAA,sBAAa;IACbC,IAAAA,kBAAU,EAAC;;;eAEuB,wBAAW,4BAAX,wBAAW;;GADjCxC"}