{"version":3,"sources":["../../../src/modules/current-user/current-user.controller.ts"],"sourcesContent":["import { Body, Controller, Get, Put } from '@nestjs/common';\nimport {\n  ApiBearerAuth,\n  ApiOkResponse,\n  ApiOperation,\n  ApiTags,\n} from '@nestjs/swagger';\n\nimport { ENTITY_BIZ_TYPE } from '@/constants';\nimport { OperLog } from '@/decorators';\n\nimport {\n  UpdateCurrentUserBaseDTO,\n  UpdateCurrentUserPasswordDTO,\n} from './current-user.dto';\nimport { CurrentUserService } from './current-user.service';\nimport {\n  GetCurrentUserInfoVO,\n  GetCurrentUserProfileVO,\n} from './current-user.vo';\n\n@ApiTags('当前用户接口')\n@ApiBearerAuth()\n@Controller('/current-user')\nexport class CurrentUserController {\n  constructor(private currentService: CurrentUserService) {}\n\n  @ApiOperation({ summary: '获取用户信息' })\n  @ApiOkResponse({ type: GetCurrentUserInfoVO })\n  @Get('/getInfo')\n  async getInfo() {\n    return await this.currentService.handleGetInfo();\n  }\n\n  @ApiOperation({ summary: '获取用户配置' })\n  @ApiOkResponse({ type: GetCurrentUserProfileVO })\n  @Get('/getProfile')\n  async getProfile() {\n    return await this.currentService.handleGetProfile();\n  }\n\n  @ApiOperation({ summary: '更新用户基本信息' })\n  @OperLog({ title: '当前用户', bizType: ENTITY_BIZ_TYPE.UPDATE })\n  @Put('/updateBase')\n  async updateBase(@Body() dto: UpdateCurrentUserBaseDTO) {\n    await this.currentService.handleUpdateBase(dto);\n  }\n\n  @ApiOperation({ summary: '更新用户密码' })\n  @OperLog({ title: '当前用户', bizType: ENTITY_BIZ_TYPE.UPDATE })\n  @Put('/updatePassword')\n  async updatePassword(@Body() dto: UpdateCurrentUserPasswordDTO) {\n    await this.currentService.handleUpdatePassword(dto);\n  }\n}\n"],"names":["CurrentUserController","getInfo","currentService","handleGetInfo","getProfile","handleGetProfile","updateBase","dto","handleUpdateBase","updatePassword","handleUpdatePassword","constructor","ApiOperation","summary","ApiOkResponse","type","GetCurrentUserInfoVO","Get","GetCurrentUserProfileVO","OperLog","title","bizType","ENTITY_BIZ_TYPE","UPDATE","Put","Body","ApiTags","ApiBearerAuth","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwBaA;;;eAAAA;;;wBAxB8B;yBAMpC;2BAEyB;4BACR;gCAKjB;oCAC4B;+BAI5B;;;;;;;;;;;;;;;AAKA,IAAA,AAAMA,wBAAN,MAAMA;IAGX,MAGMC,UAAU;QACd,OAAO,MAAM,IAAI,CAACC,cAAc,CAACC,aAAa;IAChD;IAEA,MAGMC,aAAa;QACjB,OAAO,MAAM,IAAI,CAACF,cAAc,CAACG,gBAAgB;IACnD;IAEA,MAGMC,WAAW,AAAQC,GAA6B,EAAE;QACtD,MAAM,IAAI,CAACL,cAAc,CAACM,gBAAgB,CAACD;IAC7C;IAEA,MAGME,eAAe,AAAQF,GAAiC,EAAE;QAC9D,MAAM,IAAI,CAACL,cAAc,CAACQ,oBAAoB,CAACH;IACjD;IA5BAI,YAAY,AAAQT,cAAkC,CAAE;aAApCA,iBAAAA;IAAqC;AA6B3D;;IA3BGU,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAS;IACjCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMC,mCAAoB;IAAC;IAC3CC,IAAAA,WAAG,EAAC;;;;GALMjB;;IAUVY,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAS;IACjCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMG,sCAAuB;IAAC;IAC9CD,IAAAA,WAAG,EAAC;;;;GAZMjB;;IAiBVY,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAW;IACnCM,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACC,MAAM;IAAC;IACzDC,IAAAA,WAAG,EAAC;IACaC,aAAAA,IAAAA,YAAI;;;eAAQ,wCAAwB,4BAAxB,wCAAwB;;;GApB3CzB;;IAwBVY,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAS;IACjCM,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACC,MAAM;IAAC;IACzDC,IAAAA,WAAG,EAAC;IACiBC,aAAAA,IAAAA,YAAI;;;eAAQ,4CAA4B,4BAA5B,4CAA4B;;;GA3BnDzB;AAAAA;IAHZ0B,IAAAA,gBAAO,EAAC;IACRC,IAAAA,sBAAa;IACbC,IAAAA,kBAAU,EAAC;;;eAE0B,sCAAkB,4BAAlB,sCAAkB;;GAD3C5B"}