{"version":3,"sources":["../../../../src/modules/monitor/oper-log/oper-log.controller.ts"],"sourcesContent":["import { Body, Controller, Delete, Post } from '@nestjs/common';\nimport {\n  ApiBearerAuth,\n  ApiOkResponse,\n  ApiOperation,\n  ApiTags,\n} from '@nestjs/swagger';\n\nimport { ENTITY_BIZ_TYPE } from '@/constants';\nimport { OperLog, Permission } from '@/decorators';\nimport { DelDTO, ExportResultVO } from '@/models';\n\nimport { FindOperLogPageDTO } from './oper-log.dto';\nimport { OperLogService } from './oper-log.service';\nimport { FindOperLogPageVO } from './oper-log.vo';\n\n@ApiTags('操作日志接口')\n@ApiBearerAuth()\n@Controller('/monitor/operLog')\nexport class OperLogController {\n  constructor(private operLogService: OperLogService) {}\n\n  @ApiOperation({ summary: '查询操作日志分页' })\n  @ApiOkResponse({ type: FindOperLogPageVO })\n  @Permission('monitor:operLog:list')\n  @Post('/page')\n  async findPage(@Body() dto: FindOperLogPageDTO) {\n    return await this.operLogService.handleFindPage(dto);\n  }\n\n  @ApiOperation({ summary: '导出操作日志分页' })\n  @ApiOkResponse({ type: ExportResultVO })\n  @OperLog({ title: '操作日志', bizType: ENTITY_BIZ_TYPE.EXPORT })\n  @Permission('monitor:operLog:export')\n  @Post('/export')\n  async exportPage(@Body() dto: FindOperLogPageDTO) {\n    return await this.operLogService.handleExportPage(dto);\n  }\n\n  @ApiOperation({ summary: '删除操作日志' })\n  @OperLog({ title: '操作日志', bizType: ENTITY_BIZ_TYPE.DELETE })\n  @Permission('monitor:operLog:remove')\n  @Delete('/delete')\n  async deleteMany(@Body() dto: DelDTO) {\n    await this.operLogService.handleDeleteMany(dto);\n  }\n\n  @ApiOperation({ summary: '清空操作日志' })\n  @OperLog({ title: '操作日志', bizType: ENTITY_BIZ_TYPE.CLEAN })\n  @Permission('monitor:operLog:remove')\n  @Delete('/clear')\n  async clear() {\n    await this.operLogService.handleClear();\n  }\n}\n"],"names":["OperLogController","findPage","dto","operLogService","handleFindPage","exportPage","handleExportPage","deleteMany","handleDeleteMany","clear","handleClear","constructor","ApiOperation","summary","ApiOkResponse","type","FindOperLogPageVO","Permission","Post","Body","ExportResultVO","OperLog","title","bizType","ENTITY_BIZ_TYPE","EXPORT","DELETE","Delete","CLEAN","ApiTags","ApiBearerAuth","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAmBaA;;;eAAAA;;;wBAnBkC;yBAMxC;2BAEyB;4BACI;wBACG;4BAEJ;gCACJ;2BACG;;;;;;;;;;;;;;;AAK3B,IAAA,AAAMA,oBAAN,MAAMA;IAGX,MAIMC,SAAS,AAAQC,GAAuB,EAAE;QAC9C,OAAO,MAAM,IAAI,CAACC,cAAc,CAACC,cAAc,CAACF;IAClD;IAEA,MAKMG,WAAW,AAAQH,GAAuB,EAAE;QAChD,OAAO,MAAM,IAAI,CAACC,cAAc,CAACG,gBAAgB,CAACJ;IACpD;IAEA,MAIMK,WAAW,AAAQL,GAAW,EAAE;QACpC,MAAM,IAAI,CAACC,cAAc,CAACK,gBAAgB,CAACN;IAC7C;IAEA,MAIMO,QAAQ;QACZ,MAAM,IAAI,CAACN,cAAc,CAACO,WAAW;IACvC;IAjCAC,YAAY,AAAQR,cAA8B,CAAE;aAAhCA,iBAAAA;IAAiC;AAkCvD;;IAhCGS,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAW;IACnCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMC,4BAAiB;IAAC;IACxCC,IAAAA,sBAAU,EAAC;IACXC,IAAAA,YAAI,EAAC;IACUC,aAAAA,IAAAA,YAAI;;;eAAQ,8BAAkB,4BAAlB,8BAAkB;;;GAPnCnB;;IAWVY,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAW;IACnCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMK,sBAAc;IAAC;IACrCC,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACC,MAAM;IAAC;IACzDR,IAAAA,sBAAU,EAAC;IACXC,IAAAA,YAAI,EAAC;IACYC,aAAAA,IAAAA,YAAI;;;eAAQ,8BAAkB,4BAAlB,8BAAkB;;;GAhBrCnB;;IAoBVY,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAS;IACjCQ,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACE,MAAM;IAAC;IACzDT,IAAAA,sBAAU,EAAC;IACXU,IAAAA,cAAM,EAAC;IACUR,aAAAA,IAAAA,YAAI;;;eAAQ,cAAM,4BAAN,cAAM;;;GAxBzBnB;;IA4BVY,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAS;IACjCQ,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACI,KAAK;IAAC;IACxDX,IAAAA,sBAAU,EAAC;IACXU,IAAAA,cAAM,EAAC;;;;GA/BG3B;AAAAA;IAHZ6B,IAAAA,gBAAO,EAAC;IACRC,IAAAA,sBAAa;IACbC,IAAAA,kBAAU,EAAC;;;eAE0B,8BAAc,4BAAd,8BAAc;;GADvC/B"}