{"version":3,"sources":["../../../../src/modules/monitor/cache/cache.controller.ts"],"sourcesContent":["import { Controller, Delete, Get, Query } from '@nestjs/common';\nimport {\n  ApiBearerAuth,\n  ApiOkResponse,\n  ApiOperation,\n  ApiQuery,\n  ApiTags,\n} from '@nestjs/swagger';\n\nimport { ENTITY_BIZ_TYPE } from '@/constants';\nimport { OperLog, Permission } from '@/decorators';\n\nimport { CacheService } from './cache.service';\nimport { GetCacheKeysVO, GetCacheNamesVO, GetCacheValueVO } from './cache.vo';\n\n@ApiBearerAuth()\n@ApiTags('缓存接口')\n@Controller('/monitor/cache')\nexport class CacheController {\n  constructor(private cacheService: CacheService) {}\n\n  @ApiOperation({ summary: '获取缓存名称列表' })\n  @ApiOkResponse({ type: GetCacheNamesVO })\n  @Permission('monitor:cache:list')\n  @Get('/getNames')\n  async getNames() {\n    return await this.cacheService.handleGetNames();\n  }\n\n  @ApiOperation({ summary: '通过名称获取缓存键名列表' })\n  @ApiOkResponse({ type: GetCacheKeysVO })\n  @ApiQuery({ name: 'name', description: '缓存名称' })\n  @Permission('monitor:cache:list')\n  @Get('/getKeys')\n  async getKeys(@Query('name') name: string) {\n    return await this.cacheService.handleGetKeys(name);\n  }\n\n  @ApiOperation({ summary: '通过名称清除缓存' })\n  @ApiQuery({ name: 'name', description: '缓存名称' })\n  @OperLog({ title: '缓存', bizType: ENTITY_BIZ_TYPE.DELETE })\n  @Permission('monitor:cache:list')\n  @Delete('/clearName')\n  async clearName(@Query('name') name: string) {\n    return await this.cacheService.handleClearName(name);\n  }\n\n  @ApiOperation({ summary: '通过键名获取缓存值' })\n  @ApiOkResponse({ type: GetCacheValueVO })\n  @ApiQuery({ name: 'key', description: '缓存键名' })\n  @Permission('monitor:cache:list')\n  @Get('/value')\n  async getValue(@Query('key') key: string) {\n    return await this.cacheService.handleGetValue(key);\n  }\n\n  @ApiOperation({ summary: '通过键名清除缓存' })\n  @ApiQuery({ name: 'key', description: '缓存键名' })\n  @OperLog({ title: '缓存', bizType: ENTITY_BIZ_TYPE.CLEAN })\n  @Permission('monitor:cache:list')\n  @Delete('/clearKey')\n  async clearKey(@Query('key') key: string) {\n    return await this.cacheService.handleClearKey(key);\n  }\n}\n"],"names":["CacheController","getNames","cacheService","handleGetNames","getKeys","name","handleGetKeys","clearName","handleClearName","getValue","key","handleGetValue","clearKey","handleClearKey","constructor","ApiOperation","summary","ApiOkResponse","type","GetCacheNamesVO","Permission","Get","GetCacheKeysVO","ApiQuery","description","Query","OperLog","title","bizType","ENTITY_BIZ_TYPE","DELETE","Delete","GetCacheValueVO","CLEAN","ApiBearerAuth","ApiTags","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAkBaA;;;eAAAA;;;wBAlBkC;yBAOxC;2BAEyB;4BACI;8BAEP;yBACoC;;;;;;;;;;;;;;;AAK1D,IAAA,AAAMA,kBAAN,MAAMA;IAGX,MAIMC,WAAW;QACf,OAAO,MAAM,IAAI,CAACC,YAAY,CAACC,cAAc;IAC/C;IAEA,MAKMC,QAAQ,AAAeC,IAAY,EAAE;QACzC,OAAO,MAAM,IAAI,CAACH,YAAY,CAACI,aAAa,CAACD;IAC/C;IAEA,MAKME,UAAU,AAAeF,IAAY,EAAE;QAC3C,OAAO,MAAM,IAAI,CAACH,YAAY,CAACM,eAAe,CAACH;IACjD;IAEA,MAKMI,SAAS,AAAcC,GAAW,EAAE;QACxC,OAAO,MAAM,IAAI,CAACR,YAAY,CAACS,cAAc,CAACD;IAChD;IAEA,MAKME,SAAS,AAAcF,GAAW,EAAE;QACxC,OAAO,MAAM,IAAI,CAACR,YAAY,CAACW,cAAc,CAACH;IAChD;IA5CAI,YAAY,AAAQZ,YAA0B,CAAE;aAA5BA,eAAAA;IAA6B;AA6CnD;;IA3CGa,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAW;IACnCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMC,wBAAe;IAAC;IACtCC,IAAAA,sBAAU,EAAC;IACXC,IAAAA,WAAG,EAAC;;;;GANMrB;;IAWVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAe;IACvCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMI,uBAAc;IAAC;IACrCC,IAAAA,iBAAQ,EAAC;QAAElB,MAAM;QAAQmB,aAAa;IAAO;IAC7CJ,IAAAA,sBAAU,EAAC;IACXC,IAAAA,WAAG,EAAC;IACUI,aAAAA,IAAAA,aAAK,EAAC;;;;;;GAhBVzB;;IAoBVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAW;IACnCO,IAAAA,iBAAQ,EAAC;QAAElB,MAAM;QAAQmB,aAAa;IAAO;IAC7CE,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAMC,SAASC,0BAAe,CAACC,MAAM;IAAC;IACvDV,IAAAA,sBAAU,EAAC;IACXW,IAAAA,cAAM,EAAC;IACSN,aAAAA,IAAAA,aAAK,EAAC;;;;;;GAzBZzB;;IA6BVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAY;IACpCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMc,wBAAe;IAAC;IACtCT,IAAAA,iBAAQ,EAAC;QAAElB,MAAM;QAAOmB,aAAa;IAAO;IAC5CJ,IAAAA,sBAAU,EAAC;IACXC,IAAAA,WAAG,EAAC;IACWI,aAAAA,IAAAA,aAAK,EAAC;;;;;;GAlCXzB;;IAsCVe,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAW;IACnCO,IAAAA,iBAAQ,EAAC;QAAElB,MAAM;QAAOmB,aAAa;IAAO;IAC5CE,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAMC,SAASC,0BAAe,CAACI,KAAK;IAAC;IACtDb,IAAAA,sBAAU,EAAC;IACXW,IAAAA,cAAM,EAAC;IACQN,aAAAA,IAAAA,aAAK,EAAC;;;;;;GA3CXzB;AAAAA;IAHZkC,IAAAA,sBAAa;IACbC,IAAAA,gBAAO,EAAC;IACRC,IAAAA,kBAAU,EAAC;;;eAEwB,0BAAY,4BAAZ,0BAAY;;GADnCpC"}