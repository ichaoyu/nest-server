{"version":3,"sources":["../../../../src/modules/monitor/online/online.controller.ts"],"sourcesContent":["import { Body, Controller, Delete, Post, Query } from '@nestjs/common';\nimport {\n  ApiBearerAuth,\n  ApiOkResponse,\n  ApiOperation,\n  ApiQuery,\n  ApiTags,\n} from '@nestjs/swagger';\n\nimport { ENTITY_BIZ_TYPE } from '@/constants';\nimport { OperLog, Permission } from '@/decorators';\n\nimport { FindOnlinePageDTO } from './online.dto';\nimport { OnlineService } from './online.service';\nimport { FindOnlinePageVO } from './online.vo';\n\n@ApiTags('在线用户接口')\n@ApiBearerAuth()\n@Controller('/monitor/online')\nexport class OnlineController {\n  constructor(private onlineService: OnlineService) {}\n\n  @ApiOperation({ summary: '查询在线分页' })\n  @ApiOkResponse({ type: FindOnlinePageVO })\n  @Permission('monitor:online:list')\n  @Post('/page')\n  async findPage(@Body() dto: FindOnlinePageDTO) {\n    return await this.onlineService.handleFindPage(dto);\n  }\n\n  @ApiOperation({ summary: '用户下线' })\n  @ApiQuery({ name: 'id', description: '会话编号' })\n  @OperLog({ title: '在线用户', bizType: ENTITY_BIZ_TYPE.FORCE })\n  @Permission('monitor:online:delete')\n  @Delete('/')\n  async offline(@Query('id') id: string) {\n    await this.onlineService.handleOffline(id);\n  }\n}\n"],"names":["OnlineController","findPage","dto","onlineService","handleFindPage","offline","id","handleOffline","constructor","ApiOperation","summary","ApiOkResponse","type","FindOnlinePageVO","Permission","Post","Body","ApiQuery","name","description","OperLog","title","bizType","ENTITY_BIZ_TYPE","FORCE","Delete","Query","ApiTags","ApiBearerAuth","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAmBaA;;;eAAAA;;;wBAnByC;yBAO/C;2BAEyB;4BACI;2BAEF;+BACJ;0BACG;;;;;;;;;;;;;;;AAK1B,IAAA,AAAMA,mBAAN,MAAMA;IAGX,MAIMC,SAAS,AAAQC,GAAsB,EAAE;QAC7C,OAAO,MAAM,IAAI,CAACC,aAAa,CAACC,cAAc,CAACF;IACjD;IAEA,MAKMG,QAAQ,AAAaC,EAAU,EAAE;QACrC,MAAM,IAAI,CAACH,aAAa,CAACI,aAAa,CAACD;IACzC;IAjBAE,YAAY,AAAQL,aAA4B,CAAE;aAA9BA,gBAAAA;IAA+B;AAkBrD;;IAhBGM,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAS;IACjCC,IAAAA,sBAAa,EAAC;QAAEC,MAAMC,0BAAgB;IAAC;IACvCC,IAAAA,sBAAU,EAAC;IACXC,IAAAA,YAAI,EAAC;IACUC,aAAAA,IAAAA,YAAI;;;eAAQ,4BAAiB,4BAAjB,4BAAiB;;;GAPlChB;;IAWVS,IAAAA,qBAAY,EAAC;QAAEC,SAAS;IAAO;IAC/BO,IAAAA,iBAAQ,EAAC;QAAEC,MAAM;QAAMC,aAAa;IAAO;IAC3CC,IAAAA,mBAAO,EAAC;QAAEC,OAAO;QAAQC,SAASC,0BAAe,CAACC,KAAK;IAAC;IACxDV,IAAAA,sBAAU,EAAC;IACXW,IAAAA,cAAM,EAAC;IACOC,aAAAA,IAAAA,aAAK,EAAC;;;;;;GAhBV1B;AAAAA;IAHZ2B,IAAAA,gBAAO,EAAC;IACRC,IAAAA,sBAAa;IACbC,IAAAA,kBAAU,EAAC;;;eAEyB,4BAAa,4BAAb,4BAAa;;GADrC7B"}