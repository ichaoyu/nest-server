{"version":3,"sources":["../../src/utils/transform.util.ts"],"sourcesContent":["import { chunk } from 'lodash-unified';\n\nimport { ITreeNode } from '@/interfaces';\n\ntype IFieldNames = Omit<ITreeNode, 'children'>;\n\n/**\n * 数据转化工具\n */\nexport const TransformUtil = {\n  /**\n   * 列表转树形\n   * @static\n   * @param {any[]} list 列表\n   * @param {IFieldNames} fieldNames 字段名\n   */\n  listToTree: (list: any[], fieldNames: IFieldNames) => {\n    const { title, key, parentKey } = fieldNames;\n    const temp = list.map<ITreeNode>((v) => ({\n      title: v[title],\n      key: v[key],\n      parentKey: v[parentKey],\n      children: [],\n    }));\n    const hash = new Map<string, ITreeNode>();\n    const tree = [] as ITreeNode[];\n\n    for (const v of temp) {\n      hash.set(v.key, v);\n      const parent = hash.get(v.parentKey);\n\n      if (!parent) {\n        tree.push(v);\n      } else {\n        parent.children.push(v);\n      }\n    }\n\n    return tree;\n  },\n  /**\n   * 数组转分页\n   * @param {any[]} arr\n   * @param {number} pageNum\n   * @param {number} pageSize\n   */\n  arrToPage: (arr: any[], pageNum: number, pageSize: number) => {\n    return chunk(arr, pageSize)[pageNum - 1];\n  },\n};\n"],"names":["TransformUtil","listToTree","list","fieldNames","title","key","parentKey","temp","map","v","children","hash","Map","tree","set","parent","get","push","arrToPage","arr","pageNum","pageSize","chunk"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BASaA;;;eAAAA;;;+BATS;AASf,MAAMA,gBAAgB;IAC3B;;;;;GAKC,GACDC,YAAY,CAACC,MAAaC;QACxB,MAAM,EAAEC,KAAK,EAAEC,GAAG,EAAEC,SAAS,EAAE,GAAGH;QAClC,MAAMI,OAAOL,KAAKM,GAAG,CAAY,CAACC,IAAO,CAAA;gBACvCL,OAAOK,CAAC,CAACL,MAAM;gBACfC,KAAKI,CAAC,CAACJ,IAAI;gBACXC,WAAWG,CAAC,CAACH,UAAU;gBACvBI,UAAU,EAAE;YACd,CAAA;QACA,MAAMC,OAAO,IAAIC;QACjB,MAAMC,OAAO,EAAE;QAEf,KAAK,MAAMJ,KAAKF,KAAM;YACpBI,KAAKG,GAAG,CAACL,EAAEJ,GAAG,EAAEI;YAChB,MAAMM,SAASJ,KAAKK,GAAG,CAACP,EAAEH,SAAS;YAEnC,IAAI,CAACS,QAAQ;gBACXF,KAAKI,IAAI,CAACR;YACZ,OAAO;gBACLM,OAAOL,QAAQ,CAACO,IAAI,CAACR;YACvB;QACF;QAEA,OAAOI;IACT;IACA;;;;;GAKC,GACDK,WAAW,CAACC,KAAYC,SAAiBC;QACvC,OAAOC,IAAAA,oBAAK,EAACH,KAAKE,SAAS,CAACD,UAAU,EAAE;IAC1C;AACF"}