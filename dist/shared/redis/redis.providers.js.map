{"version":3,"sources":["../../../src/shared/redis/redis.providers.ts"],"sourcesContent":["import { InjectionToken, Provider } from '@nestjs/common';\n\nimport {\n  CreateType,\n  OptionsProviderRedis,\n  RedisClient,\n  RedisClientOptions,\n  RedisCluster,\n  RedisClusterOptions,\n} from '@/interfaces';\n\nexport function createRedisClient(\n  clientToken: InjectionToken,\n  optionsToken: InjectionToken,\n): Provider {\n  return {\n    provide: clientToken,\n    useFactory: (options: RedisClientOptions) => {\n      return new RedisClient(options);\n    },\n    inject: [optionsToken],\n  };\n}\n\nexport function createRedisCluster(\n  clusterToken: InjectionToken,\n  optionsToken: InjectionToken,\n): Provider {\n  return {\n    provide: clusterToken,\n    useFactory: (options: RedisClusterOptions) => {\n      return new RedisCluster(options.nodes, options.options);\n    },\n    inject: [optionsToken],\n  };\n}\n\nexport function createRedisCommonOptions(\n  optionsToken: InjectionToken,\n  provider: OptionsProviderRedis,\n): Provider {\n  return {\n    provide: optionsToken,\n    ...provider,\n  };\n}\n\nexport function createFactory(type: CreateType) {\n  const factory = {\n    client: createRedisClient,\n    cluster: createRedisCluster,\n  };\n\n  return factory[type];\n}\n"],"names":["createFactory","createRedisClient","createRedisCluster","createRedisCommonOptions","clientToken","optionsToken","provide","useFactory","options","RedisClient","inject","clusterToken","RedisCluster","nodes","provider","type","factory","client","cluster"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IA+CgBA,aAAa;eAAbA;;IApCAC,iBAAiB;eAAjBA;;IAaAC,kBAAkB;eAAlBA;;IAaAC,wBAAwB;eAAxBA;;;4BA5BT;AAEA,SAASF,kBACdG,WAA2B,EAC3BC,YAA4B;IAE5B,OAAO;QACLC,SAASF;QACTG,YAAY,CAACC;YACX,OAAO,IAAIC,uBAAW,CAACD;QACzB;QACAE,QAAQ;YAACL;SAAa;IACxB;AACF;AAEO,SAASH,mBACdS,YAA4B,EAC5BN,YAA4B;IAE5B,OAAO;QACLC,SAASK;QACTJ,YAAY,CAACC;YACX,OAAO,IAAII,wBAAY,CAACJ,QAAQK,KAAK,EAAEL,QAAQA,OAAO;QACxD;QACAE,QAAQ;YAACL;SAAa;IACxB;AACF;AAEO,SAASF,yBACdE,YAA4B,EAC5BS,QAA8B;IAE9B,OAAO;QACLR,SAASD;QACT,GAAGS,QAAQ;IACb;AACF;AAEO,SAASd,cAAce,IAAgB;IAC5C,MAAMC,UAAU;QACdC,QAAQhB;QACRiB,SAAShB;IACX;IAEA,OAAOc,OAAO,CAACD,KAAK;AACtB"}