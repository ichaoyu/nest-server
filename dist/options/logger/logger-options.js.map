{"version":3,"sources":["../../../src/options/logger/logger-options.ts"],"sourcesContent":["import { join } from 'path';\nimport { ConfigService } from '@nestjs/config';\nimport { LoggerModuleAsyncParams } from 'nestjs-pino';\nimport { SysUtil } from '@/utils';\n\nexport const LOGGER_OPTIONS: LoggerModuleAsyncParams = {\n  // @ts-ignore\n  useFactory: (configService: ConfigService) => {\n    return {\n      pinoHttp: [\n        {\n          customErrorMessage: () => '[REQUEST_FAILED]',\n          customSuccessMessage: () => '[REQUEST_SUCCEEDED]',\n          customReceivedMessage: () => '[REQUEST_RECEIVED]',\n          ...(SysUtil.isDevelopment\n            ? {\n                level: 'debug',\n                quietReqLogger: true,\n                transport: {\n                  // target: join(__dirname, './logger-pretty.transport'),\n                  target: 'pino-pretty',\n                  options: {\n                    colorize: true,\n                    translateTime: 'SYS:yyyy/mm/dd HH:MM:ss.l',\n                    singleLine: true,\n                    ignore: 'pid,context,hostname',\n                  },\n                },\n              }\n            : {\n                target: 'pino-roll',\n                options: {\n                  // level: 'info',\n                  file: join('logs', 'log.txt'),\n                  frequency: 'daily',\n                  size: '10m',\n                  mkdir: true,\n                },\n              }),\n        },\n      ],\n    };\n  },\n  inject: [ConfigService],\n};\n"],"names":["LOGGER_OPTIONS","useFactory","configService","pinoHttp","customErrorMessage","customSuccessMessage","customReceivedMessage","SysUtil","isDevelopment","level","quietReqLogger","transport","target","options","colorize","translateTime","singleLine","ignore","file","join","frequency","size","mkdir","inject","ConfigService"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAKaA;;;eAAAA;;;sBALQ;wBACS;uBAEN;AAEjB,MAAMA,iBAA0C;IACrD,aAAa;IACbC,YAAY,CAACC;QACX,OAAO;YACLC,UAAU;gBACR;oBACEC,oBAAoB,IAAM;oBAC1BC,sBAAsB,IAAM;oBAC5BC,uBAAuB,IAAM;oBAC7B,GAAIC,cAAO,CAACC,aAAa,GACrB;wBACEC,OAAO;wBACPC,gBAAgB;wBAChBC,WAAW;4BACT,wDAAwD;4BACxDC,QAAQ;4BACRC,SAAS;gCACPC,UAAU;gCACVC,eAAe;gCACfC,YAAY;gCACZC,QAAQ;4BACV;wBACF;oBACF,IACA;wBACEL,QAAQ;wBACRC,SAAS;4BACP,iBAAiB;4BACjBK,MAAMC,IAAAA,UAAI,EAAC,QAAQ;4BACnBC,WAAW;4BACXC,MAAM;4BACNC,OAAO;wBACT;oBACF,CAAC;gBACP;aACD;QACH;IACF;IACAC,QAAQ;QAACC,qBAAa;KAAC;AACzB"}